<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Brain Tumor Detection</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
    body {
        font-family: 'Arial', sans-serif;
        background: linear-gradient(135deg, #e0f7fa, #cde7f9); 
        min-height: 100vh;
        margin: 0;
        padding: 20px;
        display: flex;
        justify-content: center;
        align-items: flex-start;
    }

    .container {
        max-width: 700px;
        width: 100%;
        position: relative;
        margin-top: 20px;
    }

    /* Glassmorphism card effect */
    .glass-card {
        backdrop-filter: blur(15px);
        background: rgba(255, 255, 255, 0.2);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        border: 1px solid rgba(255,255,255,0.3);
    }

    h1 {
        text-align: center;
        color: #1e88e5;
        margin-bottom: 10px;
    }

    p.lead {
        text-align: center;
        color: #1565c0;
        margin-bottom: 30px;
    }

    /* Upload button style */
    .btn-upload {
        width: 100%;
        background: linear-gradient(90deg, #81d4fa, #42a5f5);
        border: none;
        color: #fff;
        font-weight: bold;
        transition: 0.3s;
    }

    .btn-upload:hover {
        background: linear-gradient(90deg, #42a5f5, #81d4fa);
        box-shadow: 0 0 10px rgba(30,136,229,0.6);
    }

    /* Image container with scan line animation */
    .image-container {
        position: relative;
        margin-top: 20px;
        overflow: hidden;
        border-radius: 15px;
    }

    .image-container img {
        width: 100%;
        border-radius: 15px;
        display: block;
    }

    .scan-line {
        position: absolute;
        top: -100%;
        left: 0;
        width: 100%;
        height: 4px;
        background: linear-gradient(to right, rgba(135,206,250,0), rgba(30,144,255,0.7), rgba(135,206,250,0));
        animation: scan 3s linear infinite;
    }

    @keyframes scan {
        0% { top: -4px; }
        100% { top: 100%; }
    }

    /* Progress bar container */
    .progress-container {
        margin-top: 20px;
        background: rgba(255,255,255,0.2);
        border-radius: 20px;
        overflow: hidden;
        height: 20px;
    }

    .progress-bar {
        height: 100%;
        width: 0%;
        background: linear-gradient(90deg, #81d4fa, #42a5f5);
        border-radius: 20px;
        transition: width 0.4s ease;
    }


    .zone {
        position: absolute;
        border: 2px solid #1e88e5;
        border-radius: 50%;
        animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
        0% { transform: scale(1); opacity: 0.7; }
        50% { transform: scale(1.2); opacity: 0.4; }
        100% { transform: scale(1); opacity: 0.7; }
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }


    .form-control {
        border: 2px dashed rgba(30, 136, 229, 0.3);
        border-radius: 15px;
        padding: 15px;
        background: rgba(255, 255, 255, 0.1);
        color: #1565c0;
        transition: all 0.3s ease;
    }

    .form-control:focus {
        border-color: #1e88e5;
        box-shadow: 0 0 15px rgba(30, 136, 229, 0.3);
        background: rgba(255, 255, 255, 0.2);
    }

    .form-control::file-selector-button {
        background: linear-gradient(90deg, #81d4fa, #42a5f5);
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        color: white;
        font-weight: bold;
        margin-right: 15px;
        transition: all 0.3s ease;
    }

    .form-control::file-selector-button:hover {
        background: linear-gradient(90deg, #42a5f5, #1e88e5);
        transform: translateY(-2px);
    }

  
    .loading-state {
        position: relative;
        pointer-events: none;
    }

    .loading-state::after {
        content: 'Analyzing...';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(30, 136, 229, 0.9);
        color: white;
        padding: 10px 20px;
        border-radius: 25px;
        font-weight: bold;
        animation: pulse-loading 1s infinite;
    }

    @keyframes pulse-loading {
        0%, 100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        50% { opacity: 0.7; transform: translate(-50%, -50%) scale(1.05); }
    }

   
    .result-success {
        color: #27ae60;
    }

    .result-warning {
        color: #e74c3c;
    }

    .image-border-success {
        border: 3px solid #27ae60;
    }

    .image-border-warning {
        border: 3px solid #e74c3c;
    }
</style>
</head>
<body>
<div class="container glass-card">
    <h1>Brain Tumor Detection</h1>
    <p class="lead">Upload an MRI image to detect if there is a tumor.</p>

  
    <form method="POST" enctype="multipart/form-data" id="uploadForm">
        <input type="file" name="file" id="fileInput" class="form-control mb-3" accept="image/*" required>
        <button type="submit" class="btn btn-upload">Upload & Detect</button>
    </form>


    {% if result %}
    <div class="results-container" style="margin: 20px 0; padding: 20px; background: rgba(255,255,255,0.9); border-radius: 15px; text-align: center; animation: fadeInUp 0.6s ease-out;">
        <h3 style="color: #2c3e50; margin-bottom: 10px;">Detection Result</h3>
        <div style="font-size: 20px; font-weight: bold; margin: 15px 0;" class="{% if result and 'No Tumor' in result %}result-success{% else %}result-warning{% endif %}">
            {{ result }}
        </div>
        <div style="font-size: 16px; color: #7f8c8d; margin-bottom: 15px;">
            Confidence: {{ confidence }}
        </div>
        {% if file_path %}
        <div style="margin-top: 15px;">
            <img src="{{ file_path }}" alt="Analyzed MRI" style="max-width: 350px; max-height: 350px; border-radius: 15px; box-shadow: 0 8px 20px rgba(0,0,0,0.15);" class="{% if result and 'No Tumor' in result %}image-border-success{% else %}image-border-warning{% endif %}">
        </div>
        {% endif %}
        <div style="margin-top: 20px; padding: 15px; background: rgba(52, 152, 219, 0.1); border-radius: 10px; border-left: 4px solid #3498db;">
            <p style="margin: 0; color: #2980b9; font-size: 14px;">
                <strong>Note:</strong> This AI analysis is for research purposes. Always consult with a medical professional for diagnosis.
            </p>
        </div>
        <div style="margin-top: 15px;">
            <button onclick="resetForNewUpload()" class="btn btn-upload" style="width: auto; padding: 10px 20px;">
                Analyze Another Image
            </button>
        </div>
    </div>
    {% endif %}

   
    <div class="image-container" id="imageContainer" {% if result %}style="display: none;"{% endif %}>
        <img id="uploadedImage" src="https://media.istockphoto.com/id/1410795090/photo/human-brain.jpg?s=612x612&w=0&k=20&c=GzRLGXye0AFooo73ksPVEplXVSntUzYcAs1e4GcBjoA=" alt="MRI Demo">
        <div class="scan-line"></div>
       
        <div class="zone" style="top:30%; left:40%; width:60px; height:60px;"></div>
        <div class="zone" style="top:60%; left:55%; width:40px; height:40px;"></div>
    </div>

    
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>
</div>

<script>
    // Global variables
    const form = document.getElementById('uploadForm');
    const progressBar = document.getElementById('progressBar');
    const fileInput = document.getElementById('fileInput');
    const imageContainer = document.getElementById('imageContainer');
    const btnUpload = form.querySelector('.btn-upload');


    form.addEventListener('submit', function(e){
    
        imageContainer.style.display = 'none';
 
        btnUpload.classList.add('loading-state');
        btnUpload.textContent = 'Analyzing...';
        btnUpload.disabled = true;

  
        let width = 0;
        const interval = setInterval(() => {
            if(width >= 90){
                clearInterval(interval);
            } else {
                width += Math.random() * 3 + 1; 
                progressBar.style.width = Math.min(width, 90) + '%';
            }
        }, 100);
    });

 
    function resetForNewUpload() {
        fileInput.value = '';
        btnUpload.classList.remove('loading-state');
        btnUpload.textContent = 'Upload & Detect';
        btnUpload.disabled = false;
        progressBar.style.width = '0%';
        document.querySelector('h1').scrollIntoView({ 
            behavior: 'smooth', 
            block: 'start' 
        });
        setTimeout(() => {
            fileInput.focus();
        }, 500);
    }

    // Enhance file input interaction
    fileInput.addEventListener('change', function(e) {
        if (e.target.files.length > 0) {
            const file = e.target.files[0];
            const fileName = file.name;
            const fileSize = (file.size / 1024 / 1024).toFixed(2);
            btnUpload.innerHTML = `Analyze "${fileName}" (${fileSize} MB)`;
            btnUpload.style.background = 'linear-gradient(90deg, #27ae60, #2ecc71)';
            btnUpload.style.transform = 'scale(1.05)';
            setTimeout(() => {
                btnUpload.style.transform = 'scale(1)';
            }, 200);
        } else {
            btnUpload.textContent = 'Upload & Detect';
            btnUpload.style.background = 'linear-gradient(90deg, #81d4fa, #42a5f5)';
        }
    });

    
    window.addEventListener('load', function() {
        const resultContainer = document.querySelector('.results-container');
        if (resultContainer) {
            resultContainer.style.opacity = '0';
            resultContainer.style.transform = 'translateY(30px)';
            setTimeout(() => {
                resultContainer.style.transition = 'all 0.6s ease-out';
                resultContainer.style.opacity = '1';
                resultContainer.style.transform = 'translateY(0)';
            }, 100);
        }
    });

   
    document.querySelector('h1').addEventListener('dblclick', function() {
        if (imageContainer.style.display === 'none') {
            imageContainer.style.display = 'block';
            imageContainer.style.opacity = '0';
            setTimeout(() => {
                imageContainer.style.transition = 'opacity 0.5s ease';
                imageContainer.style.opacity = '1';
            }, 100);
        } else {
            imageContainer.style.opacity = '0';
            setTimeout(() => {
                imageContainer.style.display = 'none';
            }, 500);
        }
    });
</script>
</body>
</html>
